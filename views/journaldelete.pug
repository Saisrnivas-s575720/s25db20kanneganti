extends layout

block content
  h1= title

  - let journalid = toShow._id
  - let title = toShow.title
  - let content = toShow.content
  - let author = toShow.author

  div.mb-3
    span.fw-bold ID:
    span.ms-2 #{journalid}

  div.mb-3
    span.fw-bold Title:
    span.ms-2 #{title}

  div.mb-3
    span.fw-bold Author:
    span.ms-2 #{author}

  div.mb-3
    span.fw-bold Content:
    span.ms-2 #{content}

  div.d-flex.gap-2.mt-4
    button.btn.btn-danger#deleteBtn Delete
    a.btn.btn-secondary(href='/journals') Cancel

  script.
    document.getElementById('deleteBtn').addEventListener('click', async function () {
      const confirmed = confirm("Are you sure you want to delete this journal?");
      if (!confirmed) return;

      try {
        const response = await fetch(`/journals/${journalid}`, {
          method: 'DELETE',
          headers: { 'Accept': 'application/json' }
        });

        if (response.ok) {
          alert("Deleted successfully!");
          window.location.href = "/journals";
        } else {
          alert("Delete failed.");
        }
      } catch (err) {
        alert("Error: " + err.message);
      }
    });
